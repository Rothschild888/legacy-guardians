import{r as Re,g as qe,a as Fe}from"./vendor-D3F3s8fL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var pe={exports:{}},ne={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve;function $e(){if(ve)return ne;ve=1;var r=Re(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function f(m,h,g){var t,u={},b=null,x=null;g!==void 0&&(b=""+g),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(x=h.ref);for(t in h)l.call(h,t)&&!i.hasOwnProperty(t)&&(u[t]=h[t]);if(m&&m.defaultProps)for(t in h=m.defaultProps,h)u[t]===void 0&&(u[t]=h[t]);return{$$typeof:s,type:m,key:b,ref:x,props:u,_owner:n.current}}return ne.Fragment=a,ne.jsx=f,ne.jsxs=f,ne}var Se;function Ge(){return Se||(Se=1,pe.exports=$e()),pe.exports}var e=Ge(),o=Re();const ue=qe(o);var re={},Ce;function Le(){if(Ce)return re;Ce=1;var r=Fe();return re.createRoot=r.createRoot,re.hydrateRoot=r.hydrateRoot,re}var Pe=Le();const Qe=({companyName:r,avatar:s,badges:a,day:l,coins:n,gems:i,theme:f,onEditCompany:m})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{style:{position:"fixed",top:32,right:32,zIndex:1e3,background:"#f6d365",color:"#222",borderRadius:"50%",width:60,height:60,fontSize:28,fontWeight:900,boxShadow:"0 0 16px #f6d365cc",border:"none",cursor:"pointer"},onClick:m,title:"编辑公司信息",children:"⚙️"}),e.jsxs("div",{style:{position:"sticky",top:0,zIndex:10,background:f==="cyberpunk"?"rgba(20,20,40,0.98)":f==="classic"?"#fff":"#f6d365",borderBottom:"2px solid #00fff7",padding:"0.8rem 2rem",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:s,alt:"avatar",style:{width:40,height:40,borderRadius:"50%",boxShadow:"0 0 8px #e67e22"}}),e.jsx("span",{style:{fontWeight:700,fontSize:"1.1rem",color:f==="cyberpunk"?"#00fff7":f==="classic"?"#222":"#e67e22"},children:r})]}),e.jsxs("div",{style:{fontWeight:700,fontSize:"1.1rem",color:"#00fff7"},children:["守护者之星：",a.length,"/5"]}),e.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",color:"#ff00cc"},children:"财富目标：300%"}),e.jsxs("div",{style:{fontWeight:700,fontSize:"1.1rem",color:"#fff"},children:["第 ",l+1," 天"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("span",{style:{background:"#f6d365",color:"#222",borderRadius:8,padding:"0.3em 1em",fontWeight:700},children:["💰 ",n]}),e.jsxs("span",{style:{background:"#ff00cc",color:"#fff",borderRadius:8,padding:"0.3em 1em",fontWeight:700},children:["💎 ",i]})]})]})]}),Je=({aiPartnerData:r,badgesData:s,badges:a,history:l,onBadgeClick:n})=>e.jsxs("div",{style:{flex:.7,minWidth:220,display:"flex",flexDirection:"column",gap:"1.2rem",background:"rgba(30,30,60,0.95)",borderRadius:12,boxShadow:"0 0 16px #ff00cc55",padding:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#00fff7",fontSize:"1.1rem",marginBottom:8},children:"AI 伙伴"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:r.avatar,alt:"AI Partner",style:{width:36,height:36,borderRadius:"50%",boxShadow:"0 0 8px #00fff7"}}),e.jsx("span",{style:{color:"#fff",fontWeight:700},children:r.name})]}),e.jsx("div",{style:{color:"#fff",fontSize:"0.95rem",marginTop:8},children:l.length===0?"欢迎来到空岛守护者，分散配置，理性投资！":l[l.length-1].returns<0?r.feedbackTemplates[4]:a.length>0?r.feedbackTemplates[5].replace("{badge}",a[a.length-1]):r.feedbackTemplates[0].replace("{asset}","资产").replace("{percent}","分散")})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#e67e22",fontSize:"1.1rem",marginBottom:8},children:"成就徽章"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:s.map(i=>e.jsxs("span",{className:`legacy-badge${a.includes(i.name.replace("徽章",""))?"":" locked"}`,title:i.desc,onClick:()=>n(i),style:{cursor:"pointer"},children:[i.name," ",a.includes(i.name.replace("徽章",""))?"✔️":""]},i.key))})]})]}),Ye=({task:r,event:s,artifactsData:a,weights:l,returns:n,onWeightChange:i,onNextDay:f,onResetGame:m,onShowModal:h})=>{const g=(t,u)=>{Object.entries(l).reduce((x,[A,C])=>A===t?x+u:x+C,0)<=100&&i(t,u)};return e.jsxs("div",{style:{flex:1.2,minWidth:340,display:"flex",flexDirection:"column",gap:"1.2rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.2rem"},children:[e.jsxs("div",{className:"legacy-card",style:{flex:1},children:[e.jsx("h2",{className:"legacy-task",children:"任务卡"}),e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:r.title}),e.jsx("div",{style:{marginBottom:4},children:r.background}),e.jsx("div",{style:{color:"#888",fontSize:"0.95rem"},children:r.tip})]}),e.jsxs("div",{className:"legacy-card",style:{flex:1},children:[e.jsx("h2",{className:"legacy-event",children:"市场事件"}),s?e.jsxs("div",{children:[e.jsx("strong",{children:s.name}),": ",s.description,e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:0},children:[s.name.includes("风暴")&&e.jsx("img",{src:"https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif",alt:"storm",style:{width:"100%",height:"100%",opacity:.15,objectFit:"cover"}}),s.name.includes("牛市")&&e.jsx("img",{src:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",alt:"bull",style:{width:"100%",height:"100%",opacity:.15,objectFit:"cover"}})]}),s.choices&&Array.isArray(s.choices)&&e.jsx("div",{style:{marginTop:12},children:s.choices.map(t=>e.jsx("button",{className:"legacy-btn",style:{marginRight:8},onClick:f,children:t},t))})]}):e.jsx("div",{style:{color:"#888"},children:"暂无事件"})]})]}),e.jsxs("div",{className:"legacy-card",children:[e.jsx("h2",{className:"legacy-progress",children:"资产分配"}),e.jsx("div",{style:{display:"flex",gap:"1.2rem"},children:a.map(t=>e.jsxs("div",{style:{flex:1,background:t.theme==="forest"?"rgba(0,255,247,0.10)":t.theme==="snow"?"rgba(0,234,255,0.10)":t.theme==="volcano"?"rgba(255,111,0,0.10)":"rgba(255,0,204,0.10)",borderRadius:12,padding:"1rem",position:"relative",boxShadow:"0 2px 8px #00fff733",minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{style:{fontSize:"2rem",marginRight:12},children:t.icon}),e.jsxs("label",{style:{fontWeight:700,fontSize:"1.1rem",flex:1},children:[t.name,": ",e.jsxs("strong",{children:[l[t.key],"%"]})]})]}),e.jsx("input",{type:"range",min:0,max:100,value:l[t.key],onChange:u=>g(t.key,Number(u.target.value)),className:"legacy-slider",style:{marginBottom:8}}),e.jsx("div",{style:{height:10,borderRadius:5,background:"#222",margin:"8px 0",boxShadow:"0 0 4px #ff00cc99",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(l[t.key],100)}%`,height:"100%",borderRadius:5,background:l[t.key]>60?"#ff00cc":"#00fff7",transition:"width 0.3s"}})}),e.jsx("div",{style:{height:36,background:"linear-gradient(90deg, #222, #444)",borderRadius:6,marginBottom:4,display:"flex",alignItems:"center",justifyContent:"center",color:"#00fff7",fontSize:13,cursor:"pointer",boxShadow:"0 0 6px #00fff799"},title:`点击查看${t.name}详情`,onClick:()=>{h(`${t.name}（${t.icon}）

权重: ${l[t.key]}%

此资产代表：${t.theme==="forest"?"科技股":t.theme==="snow"?"债券":t.theme==="volcano"?"商品":"加密货币"}

风险提示: ${l[t.key]>60?"集中风险":"分散配置"}`)},children:e.jsx("span",{children:"点击查看 Mini Chart"})})]},t.key))}),e.jsxs("div",{style:{marginTop:8,color:"#888"},children:["总分配: ",e.jsxs("strong",{children:[Object.values(l).reduce((t,u)=>t+u,0),"%"]})]})]}),e.jsxs("div",{className:"legacy-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.1rem",color:"#34495e"},children:"当日收益"}),e.jsx("div",{style:{fontWeight:600,fontSize:"1.2rem"},children:n!==null?`${n}%`:'请点击"下一天"模拟收益'})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx("button",{className:"legacy-btn",style:{marginTop:0},onClick:f,children:"下一天"}),e.jsx("button",{className:"legacy-btn legacy-reset",style:{marginTop:0},onClick:m,children:"重置游戏"})]})]})]})},He=({wheelOpen:r,wheelResult:s,wheelUsed:a,aiChatOpen:l,onWheelOpen:n,onWheelClose:i,onSpinWheel:f,onAiChatOpen:m,onAiChatClose:h})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{style:{position:"fixed",bottom:110,right:32,zIndex:1e3,background:"#ff00cc",color:"#fff",borderRadius:"50%",width:60,height:60,fontSize:28,fontWeight:900,boxShadow:"0 0 16px #ff00ccbb",border:"none",cursor:a?"not-allowed":"pointer",opacity:a?.5:1},onClick:()=>!a&&n(),title:"每日转盘",disabled:a,children:"🎡"}),e.jsx("button",{style:{position:"fixed",bottom:32,right:32,zIndex:1e3,background:"#00fff7",color:"#222",borderRadius:"50%",width:60,height:60,fontSize:28,fontWeight:900,boxShadow:"0 0 16px #00fff7cc",border:"none",cursor:"pointer"},onClick:m,title:"向AI伙伴提问",children:"💬"}),r&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#222",color:"#fff",borderRadius:16,padding:32,minWidth:320,maxWidth:480,boxShadow:"0 0 32px #ff00ccbb",position:"relative",display:"flex",flexDirection:"column",gap:16,alignItems:"center"},children:[e.jsx("span",{style:{position:"absolute",top:12,right:18,fontSize:22,cursor:"pointer",color:"#ff00cc"},onClick:i,children:"×"}),e.jsx("h2",{style:{color:"#ff00cc",marginBottom:16},children:"每日转盘"}),e.jsx("div",{style:{fontSize:18,marginBottom:24},children:"点击转盘，获得随机奖励或惩罚！每天限一次。"}),e.jsx("button",{className:"legacy-btn",style:{fontSize:22,padding:"0.7rem 2.5rem",marginBottom:12},onClick:f,disabled:s!==null,children:"🎡 Spin!"}),s&&e.jsx("div",{style:{marginTop:18,color:"#fff",fontWeight:700,fontSize:20,textShadow:"0 0 8px #ff00cc"},children:s})]})})]}),Ue=({showModal:r,modalContent:s,aiChatOpen:a,dilemma:l,quiz:n,quizAnswered:i,endgame:f,showSummary:m,companyName:h,avatar:g,avatarOptions:t,theme:u,pendingCompanyName:b,aiPartnerData:x,aiInput:A,aiResponse:C,returns:Q,badges:J,onModalClose:j,onCompanyNameChange:D,onAvatarChange:_,onThemeChange:N,onPendingCompanyNameChange:Y,onDilemmaClose:W,onQuizAnswer:H,onQuizClose:U,onEndgameClose:oe,onSummaryClose:K,onAiInputChange:X,onAiAsk:T,onAiChatClose:V,onResetGame:O})=>{const w=c=>["A. 坚持长期持有","B. 立即止损","C. 增加投资"];return e.jsxs(e.Fragment,{children:[r&&s==="edit"&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#fff",color:"#222",borderRadius:16,padding:32,minWidth:320,maxWidth:480,boxShadow:"0 0 32px #f6d365cc",position:"relative",display:"flex",flexDirection:"column",gap:16},children:[e.jsx("span",{style:{position:"absolute",top:12,right:18,fontSize:22,cursor:"pointer",color:"#e67e22"},onClick:j,children:"×"}),e.jsx("h2",{style:{color:"#e67e22",marginBottom:16},children:h?"编辑公司信息":"注册公司"}),e.jsx("label",{style:{fontWeight:700,marginBottom:8},children:"公司名称："}),e.jsx("input",{type:"text",value:b,onChange:c=>Y(c.target.value),style:{padding:"0.7rem 1rem",borderRadius:8,border:"1px solid #e67e22",fontSize:16,marginBottom:8,background:"#f6d36522",color:"#222"},autoFocus:!0}),e.jsx("label",{style:{fontWeight:700,marginBottom:8},children:"选择头像："}),e.jsx("div",{style:{display:"flex",gap:12,marginBottom:12},children:t.map(c=>e.jsx("img",{src:c,alt:"avatar",style:{width:48,height:48,borderRadius:"50%",border:g===c?"3px solid #e67e22":"2px solid #ccc",cursor:"pointer",boxShadow:g===c?"0 0 8px #e67e22":"none"},onClick:()=>_(c)},c))}),e.jsx("label",{style:{fontWeight:700,marginBottom:8},children:"主题风格："}),e.jsxs("select",{value:u,onChange:c=>N(c.target.value),style:{padding:"0.7rem 1rem",borderRadius:8,border:"1px solid #e67e22",fontSize:16,marginBottom:8,background:"#f6d36522",color:"#222"},children:[e.jsx("option",{value:"cyberpunk",children:"赛博朋克"}),e.jsx("option",{value:"classic",children:"经典"}),e.jsx("option",{value:"meme",children:"搞笑"})]}),e.jsx("button",{className:"legacy-btn",style:{background:"#e67e22",color:"#fff",marginTop:12},onClick:j,children:"取消"}),h?e.jsx("button",{className:"legacy-btn",style:{background:"#00fff7",color:"#222",marginTop:12},onClick:()=>{D(b),j()},children:"保存"}):e.jsx("button",{className:"legacy-btn",style:{background:"#00fff7",color:"#222",marginTop:12},onClick:()=>{D(b),j()},children:"注册"})]})}),a&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#222",color:"#fff",borderRadius:16,padding:32,minWidth:320,maxWidth:480,boxShadow:"0 0 32px #00fff7cc",position:"relative",display:"flex",flexDirection:"column",gap:16},children:[e.jsx("span",{style:{position:"absolute",top:12,right:18,fontSize:22,cursor:"pointer",color:"#ff00cc"},onClick:V,children:"×"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("img",{src:x.avatar,alt:"AI Partner",style:{width:36,height:36,borderRadius:"50%",boxShadow:"0 0 8px #00fff7"}}),e.jsx("span",{style:{fontWeight:700,color:"#00fff7"},children:x.name})]}),e.jsx("div",{style:{fontSize:16,marginBottom:8},children:"你可以向AI伙伴提问任何金融相关问题。"}),e.jsx("input",{type:"text",value:A,onChange:c=>X(c.target.value),placeholder:"请输入你的问题...",style:{padding:"0.7rem 1rem",borderRadius:8,border:"1px solid #00fff7",fontSize:16,marginBottom:8,background:"#111",color:"#fff"}}),e.jsx("button",{className:"legacy-btn",style:{marginBottom:8},onClick:T,children:"发送"}),C&&e.jsx("div",{style:{background:"#333",color:"#00fff7",borderRadius:8,padding:12,fontSize:16,marginTop:8},children:C})]})}),l&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.8)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#222",color:"#fff",borderRadius:16,padding:32,minWidth:320,maxWidth:480,boxShadow:"0 0 32px #00fff7cc",position:"relative"},children:[e.jsx("h2",{style:{color:"#ff00cc",marginBottom:16},children:"决策时刻"}),e.jsx("div",{style:{fontSize:18,marginBottom:24},children:l}),e.jsx("div",{style:{display:"flex",gap:16},children:w().map((c,M)=>e.jsx("button",{className:"legacy-btn",onClick:W,children:c},c+M))})]})}),n&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.8)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#222",color:"#fff",borderRadius:16,padding:32,minWidth:320,maxWidth:480,boxShadow:"0 0 32px #00fff7cc",position:"relative"},children:[e.jsx("h2",{style:{color:"#00fff7",marginBottom:16},children:"金融知识小测验"}),e.jsx("div",{style:{fontSize:18,marginBottom:24},children:n.question}),e.jsx("div",{style:{display:"flex",gap:16},children:n.options.map(c=>e.jsx("button",{className:"legacy-btn",onClick:()=>H(c),children:c},c))}),i&&e.jsx("div",{style:{marginTop:18,color:i===n.answer?"#27ae60":"#e74c3c",fontWeight:700},children:i===n.answer?"回答正确！获得知识大师徽章！":"回答错误，再接再厉！"})]})}),f&&!m&&e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.85)",zIndex:99,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("img",{src:"https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif",alt:"victory",style:{width:180,height:180,marginBottom:24}}),e.jsx("h2",{style:{color:"#00fff7",fontSize:"2rem",textShadow:"0 0 16px #ff00cc"},children:"传奇空岛重启成功！"}),e.jsx("div",{style:{color:"#fff",marginTop:12},children:"你已收集全部神器徽章，财富目标达成，成功渡过终极经济风暴！"})]}),m&&e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.95)",zIndex:100,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:32},children:[e.jsx("h2",{style:{color:"#ff00cc",fontSize:"2rem",marginBottom:16},children:"冒险总结"}),e.jsxs("div",{style:{color:"#fff",fontSize:"1.2rem",marginBottom:16},children:[e.jsxs("div",{children:["累计收益：",Q,"%"]}),e.jsxs("div",{children:["获得徽章：",J.join("、")]}),e.jsx("div",{children:"教育收获：分散投资、长期主义、风险管理、冷静应对市场波动"})]}),e.jsx("button",{className:"legacy-btn",onClick:K,children:"再玩一次"})]}),r&&s!=="edit"&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:j,children:e.jsxs("div",{style:{background:"#222",color:"#fff",borderRadius:16,padding:32,minWidth:320,maxWidth:480,boxShadow:"0 0 32px #00fff7cc",position:"relative"},children:[e.jsx("span",{style:{position:"absolute",top:12,right:18,fontSize:22,cursor:"pointer",color:"#ff00cc"},onClick:j,children:"×"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontSize:16},children:s})]})})]})},ae=[{id:1,title:"科技森林起雾",background:"独角兽股价波动，你要增配吗？",tip:"科技股波动加剧，注意分散投资。",focus:"集中度风险"}],Ke=[{id:1,name:"科技泡沫",affected:["tech","crypto"],impactRange:{tech:[-.15,-.05],crypto:[-.1,-.03]},probability:.1,description:"科技股和加密货币遭遇泡沫，价格大幅下跌。"},{id:2,name:"大宗商品危机",affected:["commodity","tech"],impactRange:{commodity:[-.12,-.04],tech:[-.05,-.01]},probability:.08,description:"商品市场危机，科技股也受影响。"}],ze=[{key:"diversifier",name:"分散者徽章",desc:"同日持有 ≥4 种神器"},{key:"calm",name:"冷静头脑徽章",desc:"三次风暴日未恐慌性抛售"},{key:"longterm",name:"长远目光徽章",desc:"连续 3 天资产净值增长"},{key:"risk",name:"风险管理者徽章",desc:"高风险仓位理性止盈"},{key:"knowledge",name:"知识大师徽章",desc:"完成全部金融知识小测验"}],Xe=()=>{const[r,s]=o.useState("我的空岛公司"),[a,l]=o.useState("https://cdn-icons-png.flaticon.com/512/616/616494.png"),[n,i]=o.useState("cyberpunk"),[f,m]=o.useState(100),[h,g]=o.useState(5),[t,u]=o.useState(!1),[b,x]=o.useState(null),[A,C]=o.useState(!1),[Q,J]=o.useState(!1),[j,D]=o.useState(""),[_,N]=o.useState(""),[Y,W]=o.useState(null),[H,U]=o.useState(null),[oe,K]=o.useState(null),[X,T]=o.useState(!1),[V,O]=o.useState(!1),[w,c]=o.useState([]),[M,ce]=o.useState([]),[k,q]=o.useState({tech:25,bond:25,commodity:25,crypto:25}),[I,F]=o.useState(0),[$,v]=o.useState(null),[G,L]=o.useState(null),[de,Z]=o.useState(ae[0]),[S,E]=o.useState([]),[ee,y]=o.useState(!1),[B,ge]=o.useState(""),[We,Ie]=o.useState(r),[Be,xe]=o.useState(!1),[Ae,ye]=o.useState(""),fe=["市场波动加剧，你会选择？","突发利空消息，你会选择？","资产暴涨，你会选择？","行业政策变化，你会选择？","朋友推荐新资产，你会选择？"],Ne=["https://cdn-icons-png.flaticon.com/512/616/616494.png","https://cdn-icons-png.flaticon.com/512/616/616408.png","https://cdn-icons-png.flaticon.com/512/616/616430.png","https://cdn-icons-png.flaticon.com/512/616/616408.png","https://cdn-icons-png/flaticon.com/512/616/616408.png","https://cdn-icons-png.flaticon.com/512/616/616408.png"],Te=[{id:3,name:"科技牛市",affected:["tech","crypto"],impactRange:{tech:[.05,.15],crypto:[.03,.1]},probability:.12,description:"科技股和加密货币迎来牛市，价格大幅上涨。"},{id:4,name:"债券利好",affected:["bond"],impactRange:{bond:[.02,.08]},probability:.1,description:"债券市场利好，收益提升。"},{id:5,name:"商品暴跌",affected:["commodity"],impactRange:{commodity:[-.15,-.05]},probability:.09,description:"商品市场暴跌，注意分散风险。"},{id:6,name:"加密波动",affected:["crypto"],impactRange:{crypto:[-.2,.2]},probability:.15,description:"加密货币剧烈波动，风险与机会并存。"}],be=[...Ke,...Te],Oe=o.useCallback(()=>{const R=[{label:"收益+10%",effect:()=>v(p=>p!==null?p+10:10),color:"#27ae60"},{label:"收益-10%",effect:()=>v(p=>p!==null?p-10:-10),color:"#e74c3c"},{label:"获得分散者徽章",effect:()=>E(p=>p.includes("分散者")?p:[...p,"分散者"]),color:"#00fff7"},{label:"风险提升",effect:()=>v(p=>p!==null?p-5:-5),color:"#ff00cc"},{label:"知识大师徽章",effect:()=>E(p=>p.includes("知识大师")?p:[...p,"知识大师"]),color:"#f6d365"},{label:"无变化",effect:()=>{},color:"#888"}],z=Math.floor(Math.random()*R.length);x(R[z].label),R[z].effect(),C(!0),setTimeout(()=>{u(!1),x(null)},1800)},[]),Me=o.useCallback(async()=>{j.trim()&&(N("正在思考..."),setTimeout(()=>{const z=["你问得太专业了，我得查查我的数据库！","投资就像玩游戏，记得多收集徽章哦！","如果市场下跌，不如喝杯奶茶冷静一下？","分散投资，财富自由，顺便多吃点薯片！","你是空岛最强守护者，继续冲鸭！","AI也有点懵，建议你问ChatGPT！","投资有风险，游戏更有趣！","如果你赢了，记得截图发朋友圈！","财富密码：多玩几天，解锁彩蛋！","我猜你会选A，但B也不错！","市场风暴来袭，快用你的神器！","你问的问题让我想起了猫猫狗狗。","投资路上，记得保持微笑😄！"];N(z[Math.floor(Math.random()*z.length)])},1200))},[j]),Ee=o.useCallback(()=>{q({tech:25,bond:25,commodity:25,crypto:25}),F(0),v(null),L(null),Z(ae[0]),E([]),c([]),xe(!1),ye(""),m(100),g(5),T(!1),O(!1)},[]),De=o.useCallback((R,z)=>{Object.entries(k).reduce((se,[ie,me])=>ie===R?se+z:se+me,0)<=100&&q({...k,[R]:z})},[k]),_e=o.useCallback(()=>{if(Math.random()<.15&&(y(!0),ge(`🎉 彩蛋事件：你发现了一只会跳舞的柴犬！

奖励：收益+5%，心情+100！`),v(d=>d!==null?d+5:5),m(d=>d+10),g(d=>d+1)),C(!1),Math.random()<.4){const d=fe.map((te,he)=>he).filter(te=>!M.includes(te));if(d.length>0){const te=d[Math.floor(Math.random()*d.length)];W(fe[te]),ce(he=>[...he,te]);return}}if(Math.random()<.2){U({question:"分散投资的最大好处是什么？",options:["降低风险","增加波动","提高单一资产收益"],answer:"降低风险"});return}const R=300,p=ze.map(d=>d.name.replace("徽章","")).every(d=>S.includes(d));if($!==null&&$>=R&&p){T(!0),setTimeout(()=>O(!0),2500);return}const se=Math.floor(Math.random()*be.length),ie=be[se];L(ie);const me=(I+1)%ae.length;Z(ae[me]),F(I+1);let je=0;je=Math.random()*20-10;const P=Number((je*100).toFixed(2));v(P),m(d=>d+Math.max(0,Math.floor(P/10))),P>50&&g(d=>d+1);let le=[...S];Object.values(k).filter(d=>d>0).length>=4&&!S.includes("分散者")&&le.push("分散者"),w.length>=2&&w.slice(-2).every(d=>d.returns>0)&&P>0&&!S.includes("长远目光")&&le.push("长远目光"),Object.values(k).some(d=>d>60)&&P>0&&!S.includes("风险管理者")&&le.push("风险管理者"),E(le),c([...w,{day:I+1,weights:{...k},event:ie,returns:P}])},[I,$,S,k,w,M]);return{companyName:r,avatar:a,theme:n,coins:f,gems:h,wheelOpen:t,wheelResult:b,wheelUsed:A,aiChatOpen:Q,aiInput:j,aiResponse:_,dilemma:Y,quiz:H,quizAnswered:oe,endgame:X,showSummary:V,history:w,weights:k,day:I,returns:$,event:G,task:de,badges:S,showModal:ee,modalContent:B,pendingCompanyName:We,quizActive:Be,quizResult:Ae,avatarOptions:Ne,dilemmaQuestions:fe,setCompanyName:s,setAvatar:l,setTheme:i,setCoins:m,setGems:g,setWheelOpen:u,setWheelResult:x,setWheelUsed:C,setAiChatOpen:J,setAiInput:D,setAiResponse:N,setDilemma:W,setQuiz:U,setQuizAnswered:K,setEndgame:T,setShowSummary:O,setHistory:c,setWeights:q,setDay:F,setReturns:v,setEvent:L,setTask:Z,setBadges:E,setShowModal:y,setModalContent:ge,setPendingCompanyName:Ie,setQuizActive:xe,setQuizResult:ye,handleSpinWheel:Oe,handleAiAsk:Me,resetGame:Ee,handleWeightChange:De,nextDay:_e}},Ve=[{key:"tech",name:"敏捷之剑",theme:"forest",icon:"🗡️",color:"#00fff7"},{key:"bond",name:"稳固之盾",theme:"snow",icon:"🛡️",color:"#00eaff"},{key:"commodity",name:"火焰之斧",theme:"volcano",icon:"🪓",color:"#ff6f00"},{key:"crypto",name:"神秘水晶",theme:"starsea",icon:"🔮",color:"#ff00cc"}],Ze="智慧猫头鹰",et="https://cdn-icons-png.flaticon.com/512/616/616494.png",tt=["观察：你当前对{asset}的配置为{percent}%","判断：该配置在{market}下属于{riskLevel}","建议：可考虑把权重从{from}%调整至{to}%，提升分散度至≥3 类","提问：如果再次遭遇{event}，你会如何应对？","鼓励：遇到风暴未抛售，体现了冷静的长期主义！","庆祝：你已获得{badge}徽章，继续保持！"],ke={name:Ze,avatar:et,feedbackTemplates:tt},nt=()=>{const r=Xe(),{companyName:s,avatar:a,theme:l,coins:n,gems:i,wheelOpen:f,wheelResult:m,wheelUsed:h,aiChatOpen:g,aiInput:t,aiResponse:u,dilemma:b,quiz:x,quizAnswered:A,endgame:C,showSummary:Q,history:J,weights:j,day:D,returns:_,event:N,task:Y,badges:W,showModal:H,modalContent:U,pendingCompanyName:oe,avatarOptions:K,setCompanyName:X,setAvatar:T,setTheme:V,setWheelOpen:O,setWheelResult:w,setAiChatOpen:c,setAiInput:M,setAiResponse:ce,setDilemma:k,setQuiz:q,setQuizAnswered:I,setEndgame:F,setShowSummary:$,setShowModal:v,setModalContent:G,setPendingCompanyName:L,handleSpinWheel:de,handleAiAsk:Z,resetGame:S,handleWeightChange:E,nextDay:ee}=r,y={editCompany:()=>{v(!0),G("edit"),L(s)},modalClose:()=>{v(!1),G("")},wheelClose:()=>{O(!1),w(null)},aiChatClose:()=>{c(!1),M(""),ce("")},dilemmaClose:()=>{k(null),ee()},quizAnswer:B=>{I(B),setTimeout(()=>{q(null),I(null),ee()},1200)},endgameClose:()=>F(!1),summaryClose:()=>{$(!1),F(!1),S()},badgeClick:B=>{v(!0),G(`${B.name}

${B.desc}`)}};return e.jsxs("div",{className:"legacy-container",style:{paddingTop:0,maxWidth:"1200px",margin:"2rem auto"},children:[e.jsx(Qe,{companyName:s,avatar:a,badges:W,day:D,coins:n,gems:i,theme:l,onEditCompany:y.editCompany}),e.jsx(He,{wheelOpen:f,wheelResult:m,wheelUsed:h,aiChatOpen:g,onWheelOpen:()=>O(!0),onWheelClose:y.wheelClose,onSpinWheel:de,onAiChatOpen:()=>c(!0),onAiChatClose:y.aiChatClose}),e.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"nowrap",marginBottom:"2rem"},children:[e.jsx(Je,{aiPartnerData:ke,badgesData:ze,badges:W,history:J,onBadgeClick:y.badgeClick}),e.jsx(Ye,{task:Y,event:N,artifactsData:Ve,weights:j,returns:_,onWeightChange:E,onNextDay:ee,onResetGame:S,onShowModal:B=>{v(!0),G(B)}})]}),e.jsx(Ue,{showModal:H,modalContent:U,aiChatOpen:g,dilemma:b,quiz:x,quizAnswered:A,endgame:C,showSummary:Q,companyName:s,avatar:a,avatarOptions:K,theme:l,pendingCompanyName:oe,aiPartnerData:ke,aiInput:t,aiResponse:u,returns:_,badges:W,onModalClose:y.modalClose,onCompanyNameChange:X,onAvatarChange:T,onThemeChange:V,onPendingCompanyNameChange:L,onDilemmaClose:y.dilemmaClose,onQuizAnswer:y.quizAnswer,onQuizClose:()=>q(null),onEndgameClose:y.endgameClose,onSummaryClose:y.summaryClose,onAiInputChange:M,onAiAsk:Z,onAiChatClose:y.aiChatClose,onResetGame:S})]})};function ot({children:r}){const[s,a]=ue.useState(null);return s?e.jsxs("div",{style:{color:"red",padding:"2rem"},children:["运行时错误: ",s.message]}):e.jsx(ue.Fragment,{children:ue.Children.map(r,l=>{try{return l}catch(n){return a(n),null}})})}function st(){return e.jsx(ot,{children:e.jsx(nt,{})})}const we=document.getElementById("root");we?(console.log("Mounting React app to #root"),Pe.createRoot(we).render(e.jsx(o.StrictMode,{children:e.jsx(st,{})}))):document.body.innerHTML='<div style="color:red;padding:2rem;">未找到 root 元素，无法挂载 React 应用。</div>';
